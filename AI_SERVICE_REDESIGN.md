# AI服务架构重新设计方案

## 概述

基于当前项目的复杂性和Spring AI集成的挑战，我们将重新设计AI服务架构，采用更简洁的方式来实现AI功能。新架构将专注于业务API定义和mock数据，同时增强真实人生事件和虚拟人生规划与AI服务的深度关联。

## 设计原则

### 1. 简化优先
- 避免复杂的Spring AI框架集成
- 使用清晰的REST API接口定义
- 提供完整的mock数据支持
- 保持代码结构简洁易维护

### 2. 业务导向
- 专注于双轨人生的核心业务需求
- 围绕事件评价和规划分析设计API
- 支持上下文相关的AI对话
- 提供个性化的AI洞察

### 3. 可扩展性
- API设计支持未来真实AI模型集成
- 模块化的服务架构
- 灵活的数据结构设计
- 支持多种AI服务提供商

## 核心功能设计

### 1. 事件AI评价服务
- **功能**: 对用户的真实人生事件进行AI分析和评价
- **输入**: 事件详情、用户背景、历史数据
- **输出**: 评价报告、建议、情感分析、影响评估

### 2. 虚拟人生规划AI分析
- **功能**: 对虚拟人生规划进行可行性分析和优化建议
- **输入**: 规划内容、用户目标、资源状况
- **输出**: 可行性评估、风险分析、优化建议、替代方案

### 3. 上下文AI对话
- **功能**: 基于特定事件或规划的深度对话
- **输入**: 对话上下文、相关数据、用户问题
- **输出**: 个性化回答、深度分析、行动建议

## API接口设计

### 事件评价API
```
POST /api/ai/events/{eventId}/evaluate
GET /api/ai/events/{eventId}/evaluation
POST /api/ai/events/{eventId}/chat
```

### 规划分析API
```
POST /api/ai/plans/{planId}/analyze
GET /api/ai/plans/{planId}/analysis
POST /api/ai/plans/{planId}/chat
```

### 通用对话API
```
POST /api/ai/chat
GET /api/ai/chat/history
POST /api/ai/chat/context
```

## 前端交互增强

### 1. 事件卡片增强
- 添加"AI评价"按钮
- 显示AI评价摘要
- 支持进入AI对话模式

### 2. 规划界面增强
- 集成AI分析面板
- 显示可行性评分
- 提供优化建议

### 3. 对话模式
- 上下文相关的对话界面
- 支持多轮对话
- 保存对话历史

## 实施计划

1. **重构后端AI服务** - 简化架构，定义清晰的API
2. **实现mock数据** - 提供完整的模拟响应
3. **增强前端交互** - 集成AI功能到现有界面
4. **测试和优化** - 确保用户体验流畅
5. **部署更新** - 发布新版本

